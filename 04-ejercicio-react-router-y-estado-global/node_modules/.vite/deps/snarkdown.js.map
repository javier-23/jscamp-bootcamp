{
  "version": 3,
  "sources": ["../../snarkdown/src/index.js"],
  "sourcesContent": ["const TAGS = {\n\t'': ['<em>','</em>'],\n\t_: ['<strong>','</strong>'],\n\t'*': ['<strong>','</strong>'],\n\t'~': ['<s>','</s>'],\n\t'\\n': ['<br />'],\n\t' ': ['<br />'],\n\t'-': ['<hr />']\n};\n\n/** Outdent a string based on the first indented line's leading whitespace\n *\t@private\n */\nfunction outdent(str) {\n\treturn str.replace(RegExp('^'+(str.match(/^(\\t| )+/) || '')[0], 'gm'), '');\n}\n\n/** Encode special attribute characters to HTML entities in a String.\n *\t@private\n */\nfunction encodeAttr(str) {\n\treturn (str+'').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n/** Parse Markdown into an HTML String. */\nexport default function parse(md, prevLinks) {\n\tlet tokenizer = /((?:^|\\n+)(?:\\n---+|\\* \\*(?: \\*)+)\\n)|(?:^``` *(\\w*)\\n([\\s\\S]*?)\\n```$)|((?:(?:^|\\n+)(?:\\t|  {2,}).+)+\\n*)|((?:(?:^|\\n)([>*+-]|\\d+\\.)\\s+.*)+)|(?:!\\[([^\\]]*?)\\]\\(([^)]+?)\\))|(\\[)|(\\](?:\\(([^)]+?)\\))?)|(?:(?:^|\\n+)([^\\s].*)\\n(-{3,}|={3,})(?:\\n+|$))|(?:(?:^|\\n+)(#{1,6})\\s*(.+)(?:\\n+|$))|(?:`([^`].*?)`)|(  \\n\\n*|\\n{2,}|__|\\*\\*|[_*]|~~)/gm,\n\t\tcontext = [],\n\t\tout = '',\n\t\tlinks = prevLinks || {},\n\t\tlast = 0,\n\t\tchunk, prev, token, inner, t;\n\n\tfunction tag(token) {\n\t\tlet desc = TAGS[token[1] || ''];\n\t\tlet end = context[context.length-1] == token;\n\t\tif (!desc) return token;\n\t\tif (!desc[1]) return desc[0];\n\t\tif (end) context.pop();\n\t\telse context.push(token);\n\t\treturn desc[end|0];\n\t}\n\n\tfunction flush() {\n\t\tlet str = '';\n\t\twhile (context.length) str += tag(context[context.length-1]);\n\t\treturn str;\n\t}\n\n\tmd = md.replace(/^\\[(.+?)\\]:\\s*(.+)$/gm, (s, name, url) => {\n\t\tlinks[name.toLowerCase()] = url;\n\t\treturn '';\n\t}).replace(/^\\n+|\\n+$/g, '');\n\n\twhile ( (token=tokenizer.exec(md)) ) {\n\t\tprev = md.substring(last, token.index);\n\t\tlast = tokenizer.lastIndex;\n\t\tchunk = token[0];\n\t\tif (prev.match(/[^\\\\](\\\\\\\\)*\\\\$/)) {\n\t\t\t// escaped\n\t\t}\n\t\t// Code/Indent blocks:\n\t\telse if (t = (token[3] || token[4])) {\n\t\t\tchunk = '<pre class=\"code '+(token[4]?'poetry':token[2].toLowerCase())+'\"><code'+(token[2] ? ` class=\"language-${token[2].toLowerCase()}\"` : '')+'>'+outdent(encodeAttr(t).replace(/^\\n+|\\n+$/g, ''))+'</code></pre>';\n\t\t}\n\t\t// > Quotes, -* lists:\n\t\telse if (t = token[6]) {\n\t\t\tif (t.match(/\\./)) {\n\t\t\t\ttoken[5] = token[5].replace(/^\\d+/gm, '');\n\t\t\t}\n\t\t\tinner = parse(outdent(token[5].replace(/^\\s*[>*+.-]/gm, '')));\n\t\t\tif (t=='>') t = 'blockquote';\n\t\t\telse {\n\t\t\t\tt = t.match(/\\./) ? 'ol' : 'ul';\n\t\t\t\tinner = inner.replace(/^(.*)(\\n|$)/gm, '<li>$1</li>');\n\t\t\t}\n\t\t\tchunk = '<'+t+'>' + inner + '</'+t+'>';\n\t\t}\n\t\t// Images:\n\t\telse if (token[8]) {\n\t\t\tchunk = `<img src=\"${encodeAttr(token[8])}\" alt=\"${encodeAttr(token[7])}\">`;\n\t\t}\n\t\t// Links:\n\t\telse if (token[10]) {\n\t\t\tout = out.replace('<a>', `<a href=\"${encodeAttr(token[11] || links[prev.toLowerCase()])}\">`);\n\t\t\tchunk = flush() + '</a>';\n\t\t}\n\t\telse if (token[9]) {\n\t\t\tchunk = '<a>';\n\t\t}\n\t\t// Headings:\n\t\telse if (token[12] || token[14]) {\n\t\t\tt = 'h' + (token[14] ? token[14].length : (token[13]>'=' ? 1 : 2));\n\t\t\tchunk = '<'+t+'>' + parse(token[12] || token[15], links) + '</'+t+'>';\n\t\t}\n\t\t// `code`:\n\t\telse if (token[16]) {\n\t\t\tchunk = '<code>'+encodeAttr(token[16])+'</code>';\n\t\t}\n\t\t// Inline formatting: *em*, **strong** & friends\n\t\telse if (token[17] || token[1]) {\n\t\t\tchunk = tag(token[17] || '--');\n\t\t}\n\t\tout += prev;\n\t\tout += chunk;\n\t}\n\n\treturn (out + md.substring(last) + flush()).replace(/^\\n+|\\n+$/g, '');\n}\n"],
  "mappings": "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",
  "names": ["TAGS", "_", "*", "~", "\n", " ", "-", "outdent", "str", "replace", "RegExp", "match", "encodeAttr", "md", "prevLinks", "chunk", "prev", "token", "inner", "t", "tokenizer", "context", "out", "links", "last", "tag", "desc", "end", "length", "pop", "push", "flush", "s", "name", "url", "toLowerCase", "exec", "substring", "index", "lastIndex", "parse"]
}
